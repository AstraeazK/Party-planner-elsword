<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Party Planner</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.5/dist/sweetalert2.all.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.5/dist/sweetalert2.min.css">
  <style>
    body { font-family: 'Fredoka', sans-serif; }
    /* Glow Effect */
    .glow-text {
      text-shadow: 0 0 10px rgba(255, 105, 180, 0.8),
                   0 0 20px rgba(255, 105, 180, 0.6),
                   0 0 30px rgba(255, 105, 180, 0.4);
    }
    /* General transitions */
    .smooth-transition { transition: all 180ms cubic-bezier(.2,.9,.2,1); }
    /* Slot hover */
    .party-row [data-slot] { transition: transform 180ms ease, box-shadow 180ms ease, filter 180ms ease, opacity 180ms ease; }
    .party-row [data-slot]:hover { transform: translateY(-4px) scale(1.03); box-shadow: 0 6px 18px rgba(0,0,0,0.5); }
    .party-row [data-slot] img { transition: transform 220ms ease, filter 220ms ease; }
    .party-row [data-slot]:hover img { transform: scale(1.04); }

    /* Character thumbnails */
    #char-container img { transition: transform 220ms ease, box-shadow 220ms ease, filter 220ms ease; border-radius: 6px; }
    #char-container img:hover { transform: translateY(-6px) scale(1.08); box-shadow: 0 12px 30px rgba(255,105,180,0.12); filter: drop-shadow(0 6px 18px rgba(0,0,0,0.45)); }

    /* Buff/Debuff list hover */
    #buff-list li, #debuff-list li, #missing-buff-list li { padding: 6px 8px; border-radius: 8px; transition: background-color 160ms ease, transform 160ms ease; }
    #buff-list li:hover { background: linear-gradient(90deg, rgba(16,185,129,0.06), rgba(16,185,129,0.02)); transform: translateX(4px); }
    #debuff-list li:hover { background: linear-gradient(90deg, rgba(236,72,153,0.06), rgba(236,72,153,0.02)); transform: translateX(4px); }
    #missing-buff-list li:hover { background: linear-gradient(90deg, rgba(250,204,21,0.06), rgba(250,204,21,0.02)); transform: translateX(4px); }

    /* Tooltip fade */
    #buff-entries-tooltip { opacity: 0; transform: translateY(-6px); transition: opacity 160ms ease, transform 160ms ease; }
    #buff-entries-tooltip.visible { opacity: 1; transform: translateY(0); }

    /* Slot badge small tweak */
    .duplicate-warning { display: inline-flex; align-items: center; height: 28px; }

    /* Custom scrollbar for sidebar and char container */
    #buff-section::-webkit-scrollbar, #char-container::-webkit-scrollbar { width: 10px; height: 10px; }
    #buff-section::-webkit-scrollbar-thumb, #char-container::-webkit-scrollbar-thumb { background: rgba(255,20,147,0.18); border-radius: 8px; }
    #buff-section::-webkit-scrollbar-track, #char-container::-webkit-scrollbar-track { background: transparent; }

    /* Floating Sparkles */
    .sparkle {
      position: absolute;
      width: 6px;
      height: 6px;
      background-color: #ffb6ff;
      border-radius: 50%;
      opacity: 0.8;
      animation: sparkleFloat 3s infinite ease-in-out;
    }
    @keyframes sparkleFloat {
      0%, 100% { transform: translateY(0); opacity: 0.8; }
      50% { transform: translateY(-10px); opacity: 0.3; }
    }

    /* SweetAlert2 compare popup style (pink border + translucent pink background) */
    .swal-compare-popup {
      border: 2px solid rgba(236,72,153,0.95) !important;
      background: rgba(236,72,153,0.06) !important;
      backdrop-filter: blur(6px);
      box-shadow: 0 10px 30px rgba(236,72,153,0.12), 0 0 40px rgba(236,72,153,0.12);
      position: relative;
    }
    .swal-compare-popup .swal2-html-container {
      color: #fff;
      text-align: center;
    }
    /* Glow outline around popup */
    .swal-compare-popup::after {
      content: '';
      position: absolute;
      inset: -8px;
      border-radius: 12px;
      box-shadow: 0 0 40px rgba(236,72,153,0.22);
      pointer-events: none;
      filter: blur(6px);
      opacity: 0.9;
    }
    /* Title styling for the compare popup */
    .swal-compare-title {
      display: block !important;
      font-size: 20px !important;
      font-weight: 900 !important;
      letter-spacing: 0.6px;
      color: #fff !important;
      background: linear-gradient(90deg,#ff80bf,#ff4da6,#ff80bf);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-align: center !important;
      margin-bottom: 6px !important;
      text-shadow: 0 2px 10px rgba(236,72,153,0.25);
    }
    /* Ensure action buttons are centered and place cancel on the left */
    .swal-compare-popup .swal2-actions {
      justify-content: center !important;
      gap: 0.6rem;
      padding-top: 0.6rem;
    }
    /* Force the cancel button to appear to the left of the confirm button */
    .swal-compare-popup .swal2-cancel {
      order: -1;
    }
  </style>
</head>
<body class="bg-gray-900 text-white">
  <header class="relative overflow-hidden text-center py-8 border-b border-pink-500 bg-gray-950 shadow-[0_0_25px_rgba(255,20,147,0.4)]">
    <div class="absolute inset-0 bg-gradient-to-r from-pink-700/20 via-fuchsia-600/20 to-pink-700/20 blur-2xl"></div>

    <!-- Sparkles -->
    <div class="sparkle top-4 left-1/3"></div>
    <div class="sparkle top-6 right-1/4"></div>
    <div class="sparkle bottom-4 left-1/4"></div>
    <h1 class="relative text-4xl md:text-5xl font-extrabold text-pink-400 glow-text tracking-wide inline-flex items-center justify-center gap-3">
      <span>‡∏à‡∏±‡∏î‡∏ï‡∏µ‡πâ‡∏Å‡∏¥‡∏ô‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏∞‡∏ó‡∏∞</span> ‚ú®
    </h1>

    <p class="relative text-pink-200 mt-2 text-sm md:text-base tracking-wider">
      ‡∏Å‡∏π‡∏Å‡πá‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Å‡∏π‡∏á‡πà‡∏ß‡∏á‡∏ï‡∏≠‡∏ô‡∏ó‡∏≥‡πÄ‡∏ß‡πá‡∏ö‡∏ô‡∏µ‡πâ
    </p>
  </header>

<!-- Main Content -->
<main class="flex-1 flex flex-col p-4 gap-4 overflow-auto">

    <div class="flex flex-1 gap-4">

    <!-- Left Main Area -->
    <div class="flex-1 flex flex-col">

      <!-- Top: Party Slots -->
      <div class="party-row bg-gray-800 rounded-lg p-2 flex gap-2 overflow-x-auto mb-4">

      <div id="custom-text-slot"
          class="w-[90px] h-[90px] bg-[#FFE6E6] text-black font-bold text-center p-2 flex items-center justify-center 
          rounded-md cursor-text break-all whitespace-pre-wrap"
          contenteditable="true">Party 1</div>

      <!-- Slot -->
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="0"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="1"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="2"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="3"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="4"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="5"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="6"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="7"></div>
      
       <!-- Icons Container -->
        <div class="ml-auto flex gap-2">
          <!-- Brush Icon -->
          <div class="w-[90px] h-[90px] bg-gray-800 flex items-center justify-center 
                      text-pink-400 hover:text-pink-300 cursor-pointer clear-btn">
            <i data-lucide="brush-cleaning" 
              class="w-10 h-10 transition-transform active:scale-90"></i>
          </div>

          <!-- Compare Icon -->
          <div class="w-[90px] h-[90px] bg-gray-800 flex items-center justify-center 
                      text-pink-400 hover:text-pink-300 cursor-pointer compare-btn" title="‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÅ‡∏ñ‡∏ß‡∏≠‡∏∑‡πà‡∏ô">
            <i data-lucide="columns" 
              class="w-8 h-8 transition-transform active:scale-90"></i>
          </div>

          <!-- Scroll Icon -->
          <div class="w-[90px] h-[90px] bg-gray-800 flex items-center justify-center 
                      text-pink-400 hover:text-pink-300 cursor-pointer scroll-btn">
            <i data-lucide="scroll-text" 
              class="w-10 h-10 transition-transform active:scale-90"></i>
          </div>
        </div>
      </div>

      <!-- Second: Party Slots -->
      <div class="party-row bg-gray-800 rounded-lg p-2 flex gap-2 overflow-x-auto mb-4">

      <!-- Text Box -->
       <div id="custom-text-slot"
          class="w-[90px] h-[90px] bg-[#FFC6C6] text-black font-bold text-center p-2 flex items-center justify-center 
          rounded-md cursor-text break-all whitespace-pre-wrap"
          contenteditable="true">Party 2</div>

      <!-- Slot -->
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="0"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="1"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="2"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="3"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="4"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="5"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="6"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="7"></div>
      
      <!-- Icons Container -->
        <div class="ml-auto flex gap-2">
          <!-- Brush Icon -->
          <div class="w-[90px] h-[90px] bg-gray-800 flex items-center justify-center 
                      text-pink-400 hover:text-pink-300 cursor-pointer clear-btn">
            <i data-lucide="brush-cleaning" 
              class="w-10 h-10 transition-transform active:scale-90"></i>
          </div>

          <!-- Compare Icon -->
          <div class="w-[90px] h-[90px] bg-gray-800 flex items-center justify-center 
                      text-pink-400 hover:text-pink-300 cursor-pointer compare-btn" title="‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÅ‡∏ñ‡∏ß‡∏≠‡∏∑‡πà‡∏ô">
            <i data-lucide="columns" 
              class="w-8 h-8 transition-transform active:scale-90"></i>
          </div>

          <!-- Scroll Icon -->
          <div class="w-[90px] h-[90px] bg-gray-800 flex items-center justify-center 
                      text-pink-400 hover:text-pink-300 cursor-pointer scroll-btn">
            <i data-lucide="scroll-text" 
              class="w-10 h-10 transition-transform active:scale-90"></i>
          </div>
        </div>
      </div>

      <!-- Third: Party Slots -->
      <div class="party-row bg-gray-800 rounded-lg p-2 flex gap-2 overflow-x-auto mb-4">

      <!-- Text Box -->
      <div id="custom-text-slot"
          class="w-[90px] h-[90px] bg-[#F7B5CA] text-black font-bold text-center p-2 flex items-center justify-center 
          rounded-md cursor-text break-all whitespace-pre-wrap"
          contenteditable="true">Party 3</div>


      <!-- Slot -->
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="0"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="1"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="2"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="3"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="4"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="5"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="6"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="7"></div>
      
      <!-- Icons Container -->
        <div class="ml-auto flex gap-2">
          <!-- Brush Icon -->
          <div class="w-[90px] h-[90px] bg-gray-800 flex items-center justify-center 
                      text-pink-400 hover:text-pink-300 cursor-pointer clear-btn">
            <i data-lucide="brush-cleaning" 
              class="w-10 h-10 transition-transform active:scale-90"></i>
          </div>

          <!-- Compare Icon -->
          <div class="w-[90px] h-[90px] bg-gray-800 flex items-center justify-center 
                      text-pink-400 hover:text-pink-300 cursor-pointer compare-btn" title="‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÅ‡∏ñ‡∏ß‡∏≠‡∏∑‡πà‡∏ô">
            <i data-lucide="columns" 
              class="w-8 h-8 transition-transform active:scale-90"></i>
          </div>

          <!-- Scroll Icon -->
          <div class="w-[90px] h-[90px] bg-gray-800 flex items-center justify-center 
                      text-pink-400 hover:text-pink-300 cursor-pointer scroll-btn">
            <i data-lucide="scroll-text" 
              class="w-10 h-10 transition-transform active:scale-90"></i>
          </div>
        </div>
      </div>

      <!-- fourth: Party Slots -->
      <div class="party-row bg-gray-800 rounded-lg p-2 flex gap-2 overflow-x-auto mb-4">

      <!-- Text Box -->
      <div id="custom-text-slot"
          class="w-[90px] h-[90px] bg-[#F0A8D0] text-black font-bold text-center p-2 flex items-center justify-center 
          rounded-md cursor-text break-all whitespace-pre-wrap"
          contenteditable="true">Party 4</div>

      <!-- Slot -->
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="0"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="1"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="2"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="3"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="4"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="5"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="6"></div>
          <div class="w-[90px] h-[90px] bg-gray-700 border-2 flex items-center justify-center" data-slot="7"></div>
      
          <!-- Icons Container -->
        <div class="ml-auto flex gap-2">
          <!-- Brush Icon -->
          <div class="w-[90px] h-[90px] bg-gray-800 flex items-center justify-center 
                      text-pink-400 hover:text-pink-300 cursor-pointer clear-btn">
            <i data-lucide="brush-cleaning" 
              class="w-10 h-10 transition-transform active:scale-90"></i>
          </div>

          <!-- Compare Icon -->
          <div class="w-[90px] h-[90px] bg-gray-800 flex items-center justify-center 
                      text-pink-400 hover:text-pink-300 cursor-pointer compare-btn" title="‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÅ‡∏ñ‡∏ß‡∏≠‡∏∑‡πà‡∏ô">
            <i data-lucide="columns" 
              class="w-8 h-8 transition-transform active:scale-90"></i>
          </div>

          <!-- Scroll Icon -->
          <div class="w-[90px] h-[90px] bg-gray-800 flex items-center justify-center 
                      text-pink-400 hover:text-pink-300 cursor-pointer scroll-btn">
            <i data-lucide="scroll-text" 
              class="w-10 h-10 transition-transform active:scale-90"></i>
          </div>
        </div>
      </div>

      <!-- Bottom: Characters -->
      <div id="char-container" class="bg-gray-800 p-1 flex flex-wrap gap-x-1 gap-y-0.5"></div>
    </div>

    <!-- Right Sidebar: Buff / Debuff -->
        <div id="buff-section" 
            class="w-[30rem] max-w-[40%] flex-shrink-0 bg-gray-900/70 p-4 rounded-2xl border border-pink-500/40 shadow-[0_0_15px_rgba(255,20,147,0.25)]
              max-h-[80vh] overflow-y-auto">
          <h2 class="text-xl font-bold text-pink-300 mb-3 text-center tracking-wide">‚ú® Buff/Debuff ‚ú®</h2>

          <div class="space-y-4">
            <div>
              <h3 class="text-green-400 font-semibold mb-2">üíö Buffs</h3>
              <ul id="buff-list" class="hover:text-green-300 transition list-disc list-inside space-y-1"></ul>
            </div>

            <div>
              <h3 class="text-red-400 font-semibold mb-2">üîª Debuffs</h3>
              <ul id="debuff-list" class="hover:text-red-300 transition list-disc list-inside text-pink-100 space-y-1"></ul>
            </div>

            <div>
              <h3 class="text-yellow-400 font-semibold mb-2">‚ö†Ô∏è Missing Buffs/Debuffs</h3>
              <ul id="missing-buff-list" class="hover:text-yellow-300 transition list-disc list-inside space-y-1"></ul>
            </div>

            <div>
              <h3 class="text-pink-400 font-semibold mb-2">üåü ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h3>
              <div id="recommend-char-list" class="flex flex-wrap gap-2"></div>
            </div>
          </div>
        </div>
  </div>

</main>



  <script type="module">
    import { createIcons, icons } from "https://cdn.jsdelivr.net/npm/lucide@latest/+esm";
    import { calculateMissingBuffs } from "./buffDebuff.js";
    import { pics } from "./pics.js";
    import "./script.js";

    document.addEventListener("DOMContentLoaded", async () => {
      createIcons({ icons });
      const { charData } = await import(`./charData.js?v=${Date.now()}`);
      window.charData = charData; 
    });
  </script>






</body>
</html>
